webpackJsonp([108],{AG2i:function(n,t,e){"use strict";function a(n){e("WFNx")}Object.defineProperty(t,"__esModule",{value:!0});var s=e("ABCa"),i=e("32eD"),o=e("0iPh"),r=(s.a,e("0iPh")),d={components:{XHeader:s.a},data:function(){return{hasImg:!1,userName:"",type:1,wxImgUrl:"",payType:"网银存款",payListFlag:!0,isBank:!0,bankList:[],showOrHideBankList:!1,bankCode:"",bankName:"",bankUrl:"",descCard:!1,masterName:"",numbers:"",userBankName:"",static:i.a.static,showDesc:"",isPosting:!1,isHasName:!1,wxDesc:{title:"温馨提示",one:"1、您可以绑定多个微信号；",two:"2、绑定的微信号、二维码必须保持一致；",three:"3、如果要更改微信号，可以先删除再添加；"},alipayDesc:{title:"温馨提示",one:"1、您可以绑定多个支付宝账号；",two:"2、绑定的支付宝账号、二维码必须保持一致；",three:"3、如果要更改支付宝账号，可以先删除再添加；"},addBankDesc:{title:"温馨提示",one:"1、您可以绑定多张银行卡；",two:"2、绑定的银行卡持卡人，银行卡号，银行必须保持一致；",three:"3、如果要更改银行卡，可以先删除再添加；"}}},created:function(){this.$route.query.realname?(this.isHasName=!0,this.masterName=this.$route.query.realname):(this.isHasName=!1,this.masterName=""),this.showDesc=this.addBankDesc,this.getBanks()},methods:{showBankList:function(){this.showOrHideBankList=!0},reSet:function(n){1===n?(this.descCard=!1,this.bankUrl=this.bankList[1].bankIcon,this.bankName=this.bankList[1].bankShortName,this.bankCode=this.bankList[1].bankCode,this.$route.query.realname?this.masterName=this.$route.query.realname:this.masterName=""):(this.masterName="",this.wxImgUrl="",document.getElementById("wxImg").style.display="none"),this.numbers=""},seleBank:function(n){"other"===n.bankCode?this.descCard=!0:this.descCard=!1,this.showOrHideBankList=!1,this.bankCode=n.bankCode,this.bankName=n.bankShortName,this.bankUrl=n.bankIcon},getBanks:function(){var n=this;this.$api.get(this.$luyou.SETTING.GET_BANKS,null,function(t){0===t.error&&(n.bankList=t.data,n.bankUrl=t.data[1].bankIcon,n.bankName=t.data[1].bankShortName,n.bankCode=t.data[1].bankCode)},function(t){t&&n.toast(n.$api.tip(t))})},selePayType:function(n){this.type=n,this.descCard=!1,1===n?(this.payType="网银存款",this.showDesc=this.addBankDesc,this.isBank=!0,this.$route.query.realname?this.masterName=this.$route.query.realname:this.masterName=""):4===n?(this.showDesc=this.wxDesc,this.payType="微信支付",this.isBank=!1,this.masterName=""):(this.showDesc=this.alipayDesc,this.payType="支付宝",this.isBank=!1,this.masterName=""),this.showOrHideSeleCon()},showOrHideSeleCon:function(){if(this.payListFlag){var n=1;"true"===this.$store.state.displayWechat&&(n+=1),"true"===this.$store.state.displayAlipay&&(n+=1),r("#v3an-payList").animate({height:30*n+2+"px"}),this.payListFlag=!1}else r("#v3an-payList").animate({height:"0px"}),this.payListFlag=!0},postImgAndGetImgUrl:function(){var n=this,t=document.getElementById("files").files[0],e=new FormData;e.append("aa",t),r.ajax({url:this.$luyou.SETTING.GET_QRCODEURL+"?action=uploadfile&objId=player&catePath=qrUrl",type:"post",data:e,async:!0,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(t){n.wxImgUrl=JSON.parse(t).data.url,document.getElementById("wxImg").src=n.$init.fserver+JSON.parse(t).data.url,document.getElementById("wxImg").style.display="block",this.hasImg=!0}})},postMessage:function(n){1===n?this.postBankMessage(n):this.postWxOrZfb(n)},postBankMessage:function(n){if(!this.checkMessage(n))return 0;this.onConfirm()},postWxOrZfb:function(n){var t=this;if(!this.checkMessage(n))return 0;this.isPosting=!0;var e=this.$qs.stringify({"search.bankName":this.wxImgUrl,"search.cardNumber":this.numbers,"search.masterName":this.masterName,"search.type":this.type});this.$api.post(this.$luyou.SETTING.SAVE_QRCODE,e,function(n){0===n.error?(t.toast("添加成功！"),setTimeout(function(){t.$router.go(-1)},1500)):t.isPosting=!1})},checkMessage:function(n){var t=!0;return this.checkBankName(this.masterName)||(t=!1),1!==n&&0===this.numbers.length&&(this.toast("请输入账号"),t=!1),1===n&&(t=this.checkBankNumber(this.numbers)),1!==this.type&&""===this.wxImgUrl&&(this.toast("请上传收款二维码"),t=!1),t},checkBankNumber:function(n){var t=!1,e=/^\d{10,25}$/;return n?e.test(n)?t=!0:this.toast("请输入正确的账号"):this.toast("请输入账号"),t},checkBankName:function(n){var t=/^[a-zA-Z\u4e00-\u9fa5]{2,15}$/,e=!1;return"其他银行"===this.bankName&&this.userBankName.length<1?this.toast("请输入您的持卡银行"):n?t.test(n)?e=!0:this.toast("持卡人姓名由2-15字符/中文组成"):this.toast("请输入持卡人姓名"),e},onConfirm:function(){var n=this,t=void 0;t="other"===this.bankCode?this.userBankName:this.bankName;var e=this.$qs.stringify({bankCode:this.bankCode,bankName:t,cardNumber:this.numbers,masterName:this.masterName});this.isPosting=!0,this.$api.post(this.$luyou.SETTING.BIND_BANKCARDS,e,function(t){0===t.error?(n.toast("添加成功！"),setTimeout(function(){n.$router.go(-1)},1500)):(n.isPosting=!1,n.toast(t.message))},function(t){t&&n.toast(n.$api.tip(t))})}}},l=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"v2an-billdetail-record-wrapper"},[e("x-header",{staticClass:"header",attrs:{"left-options":{backText:""}}},[n._v("\n    添加账户\n  ")]),n._v(" "),e("div",{staticClass:"v2an-addWxInner"},[e("div",{staticClass:"v3an-payList",attrs:{id:"v3an-payList"}},[e("div",{staticClass:"v3an-payListInner"},[e("span",{on:{click:function(t){n.selePayType(1)}}},[n._v("网银存款")]),n._v(" "),"true"===n.$store.state.displayWechat?e("span",{staticClass:"v3an-addBorder",on:{click:function(t){n.selePayType(4)}}},[n._v("微信支付")]):n._e(),n._v(" "),"true"===n.$store.state.displayAlipay?e("span",{on:{click:function(t){n.selePayType(3)}}},[n._v("支付宝")]):n._e()])]),n._v(" "),e("div",{staticClass:"v2an-addWxDesc"},[e("span",{staticClass:"v2an-addWxDescName"},[n._v("账户类型:")]),n._v(" "),e("div",{staticClass:"v2an-addWxInput v2an-formatType",on:{click:function(t){n.showOrHideSeleCon()}}},[e("span",[n._v(n._s(n.payType))]),n._v(" "),e("span",{staticClass:"v2an-pullDown"})])]),n._v(" "),e("div",{staticClass:"v2an-addWxDesc"},[e("span",{staticClass:"v2an-addWxDescName"},[n._v("账号:")]),n._v(" "),1==n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:n.numbers,expression:"numbers"}],staticClass:"v2an-addWxInput",attrs:{placeholder:"请输入银行账号"},domProps:{value:n.numbers},on:{input:function(t){t.target.composing||(n.numbers=t.target.value)}}}):n._e(),n._v(" "),4==n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:n.numbers,expression:"numbers"}],staticClass:"v2an-addWxInput",attrs:{placeholder:"请输入微信号"},domProps:{value:n.numbers},on:{input:function(t){t.target.composing||(n.numbers=t.target.value)}}}):n._e(),n._v(" "),3==n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:n.numbers,expression:"numbers"}],staticClass:"v2an-addWxInput",attrs:{placeholder:"请输入支付宝账号"},domProps:{value:n.numbers},on:{input:function(t){t.target.composing||(n.numbers=t.target.value)}}}):n._e()]),n._v(" "),e("div",{staticClass:"v2an-addWxDesc"},[e("span",{staticClass:"v2an-addWxDescName"},[n._v("姓名:")]),n._v(" "),1==n.type&&n.isHasName?e("div",{staticClass:"v2an-addWxInput"},[n._v(n._s(n.masterName))]):e("input",{directives:[{name:"model",rawName:"v-model",value:n.masterName,expression:"masterName"}],staticClass:"v2an-addWxInput",attrs:{placeholder:"请输入真实姓名"},domProps:{value:n.masterName},on:{input:function(t){t.target.composing||(n.masterName=t.target.value)}}})]),n._v(" "),n.isBank?e("div",{staticClass:"v2an-addWxDesc"},[e("span",{staticClass:"v2an-addWxDescName"},[n._v("持卡银行:")]),n._v(" "),e("div",{staticClass:"v2an-addWxInput v2an-formatType",on:{click:function(t){n.showBankList()}}},[e("img",{staticClass:"v2an-seleBankImg",attrs:{src:n.bankUrl}}),n._v(" "),e("span",{staticClass:"v2an-seleBankName"},[n._v(n._s(n.bankName))]),n._v(" "),e("span",{staticClass:"v2an-pullDown"})])]):n._e(),n._v(" "),n.descCard?e("div",{staticClass:"v2an-addWxDesc"},[e("span",{staticClass:"v2an-addWxDescName"},[n._v("银行名称:")]),n._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.userBankName,expression:"userBankName"}],staticClass:"v2an-addWxInput",attrs:{placeholder:"请输入您的持卡银行"},domProps:{value:n.userBankName},on:{input:function(t){t.target.composing||(n.userBankName=t.target.value)}}})]):n._e(),n._v(" "),n.isBank?n._e():e("div",{staticClass:"v2an-addWxDesc"},[e("span",{staticClass:"v2an-addWxDescName"},[n._v("二维码:")]),n._v(" "),e("input",{staticClass:"v2an-addWxInput",attrs:{readonly:"true",placeholder:"上传收款二维码"}}),n._v(" "),e("input",{staticClass:"v2an-addWxInput v2an-opacity0",attrs:{id:"files",type:"file",multiple:"multiple",placeholder:"上传收款二维码"},on:{change:function(t){n.postImgAndGetImgUrl()}}}),n._v(" "),n.hasImg?n._e():e("img",{staticClass:"v2an-defaultWxImg",attrs:{src:n.static+"/cssImages/mine/package.png"}}),n._v(" "),n.hasImg?e("img",{staticClass:"v2an-seleWxImg",attrs:{id:"wxImg",src:n.static+"/cssImages/mine/package.png"}}):n._e()])]),n._v(" "),n.showOrHideBankList?e("div",{staticClass:"v2an-myBankList"},[e("div",{staticClass:"v2an-showBankListOuter"},[e("div",{staticClass:"v2an-showBankListInner"},n._l(n.bankList,function(t,a){return e("div",{staticClass:"v2an-bankDesc",on:{click:function(e){n.seleBank(t)}}},[e("img",{staticClass:"v2an-bankIcon",attrs:{src:t.bankIcon}}),n._v(" "),e("span",{staticClass:"v2an-bankName"},[n._v(n._s(t.bankShortName))])])}),0)])]):n._e(),n._v(" "),e("div",{staticStyle:{overflow:"hidden"}},[n.isPosting?e("span",{staticClass:"v2an-addWxSure"},[n._v("确定")]):n._e(),n._v(" "),n.isPosting?n._e():e("span",{staticClass:"v2an-addWxSure",on:{click:function(t){n.postMessage(n.type)}}},[n._v("确定")]),n._v(" "),e("span",{staticClass:"v2an-addWxSure fr",on:{click:function(t){n.reSet(n.type)}}},[n._v("重置")])]),n._v(" "),e("div",{staticClass:"v2an-wxOuter"},[e("div",[n._v(n._s(n.showDesc.title))]),n._v(" "),e("span",[n._v(n._s(n.showDesc.one))]),n._v(" "),e("span",[n._v(n._s(n.showDesc.two))]),n._v(" "),e("span",[n._v(n._s(n.showDesc.three))])])],1)},p=[],c=e("XyMi"),h=a,m=Object(c.a)(d,l,p,!1,h,null,null);t.default=m.exports},PMHU:function(n,t,e){t=n.exports=e("FZ+f")(!1),t.push([n.i,"\ninput::-webkit-input-placeholder {\n  color: #ccc;\n}\ninput::-moz-placeholder {\n  color: #ccc;\n}\ninput:-moz-placeholder {\n  color: #ccc;\n}\ninput:-ms-input-placeholder {\n  color: #ccc;\n}\n.v2an-defaultWxImg {\n  position: absolute;\n  width: 20px;\n  height: 18px;\n  top: 6px;\n  right: 15%;\n  z-index: 1;\n}\n.v2an-seleBankImg {\n  display: block;\n  float: left;\n  width: 18px;\n  height: 18px;\n  margin-top: 6px;\n  margin-left: 6px;\n}\n.v2an-bankIcon {\n  display: block;\n  float: left;\n  width: 24px;\n  height: 24px;\n  margin-top: 10px;\n  margin-left: 20px;\n  margin-right: 20px;\n}\n.v2an-bankDesc {\n  height: 44px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  border-bottom: 1px solid #f5efef;\n}\n.v2an-bankName {\n  display: inline-block;\n  height: 44px;\n  font-size: 14px;\n  line-height: 44px;\n  width: 75%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.v2an-showBankListOuter {\n  background: #ffffff;\n  position: absolute;\n  bottom: 0px;\n  display: block;\n  width: 100%;\n  height: 308px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.v2an-myBankList {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  top: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 99;\n}\n.v2an-formatType span.v2an-pullDown {\n  width: 0;\n  height: 0;\n  margin-top: 10px;\n  border-width: 8px;\n  border-style: solid;\n  float: right;\n  margin-right: 15px;\n  border-color: red transparent transparent transparent;\n}\n.v2an-formatType span {\n  display: block;\n  float: left;\n  width: 66%;\n}\n.v2an-formatType span.v2an-seleBankName {\n  text-indent: 8px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.v3an-addBorder {\n  border-top: 1px solid #cccccc;\n  border-bottom: 1px solid #cccccc;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.v3an-payList span {\n  display: block;\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  font-size: 13px;\n  color: #666666;\n  text-indent: 10px;\n}\n.v3an-payList {\n  height: 0px;\n  position: absolute;\n  overflow: hidden;\n  top: 45px;\n  width: 60%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  left: 30%;\n  z-index: 9;\n  background: #ffffff;\n}\n.v3an-payListInner {\n  border-radius: 6px;\n  border: 1px solid #cccccc;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.v2an-opacity0 {\n  position: absolute;\n  opacity: 0;\n  left: 30%;\n  top: 0px;\n}\n.v2an-seleWxImg {\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  top: 1px;\n  right: 15%;\n  z-index: 9;\n}\n.v2an-addWxSure {\n  float: left;\n  display: block;\n  width: 44%;\n  height: 44px;\n  line-height: 44px;\n  text-align: center;\n  border-radius: 6px;\n  background: red;\n  margin-left: 3%;\n  font-size: 16px;\n  color: #ffffff;\n  margin-top: 20px;\n}\n.v2an-addWxSure.fr {\n  float: right;\n  margin-right: 3%;\n}\n.v2an-addWxDesc {\n  margin-top: 15px;\n  overflow: hidden;\n  position: relative;\n  height: 30px;\n  width: 100%;\n}\n.v2an-addWxDescName {\n  width: 24%;\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  color: #333333;\n  text-align: center;\n  display: block;\n  float: left;\n  margin-left: 6%;\n}\n.v2an-addWxInput {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  border-radius: 4px;\n  height: 30px;\n  width: 60%;\n  border: 1px solid #cccccc;\n  text-indent: 10px;\n  font-size: 13px;\n  color: #999999;\n  float: left;\n  line-height: 30px;\n}\n.v2an-addWxInner {\n  width: 94%;\n  padding-bottom: 20px;\n  margin-top: 10px;\n  margin-left: 3%;\n  border-radius: 6px;\n  overflow: hidden;\n  background: #ffffff;\n  position: relative;\n}\n.v2an-addWxOuter {\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  position: absolute;\n  z-index: 99;\n}\n.v2an-wxDelete {\n  line-height: 85px;\n  width: 60px;\n  text-align: center;\n  font-size: 14px;\n  color: red;\n  margin-left: 20px;\n}\n.v2an-wxImgDesc {\n  height: 9px;\n  line-height: 9px;\n  font-size: 11px;\n  color: #999999;\n  margin-top: 9px;\n  display: block;\n}\n.v2an-formatType {\n  line-height: 30px;\n  font-size: 14px;\n  color: #333333;\n  text-indent: 10px;\n}\n.v2an-wxImg {\n  margin-left: 10px;\n  display: block;\n  width: 41px;\n  height: 41px;\n  background: red;\n  margin-top: 12px;\n}\n.v2an-wxNum {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  height: 100%;\n  width: 54%;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -ms-flex-line-pack: distribute;\n      align-content: space-around;\n}\n.v2an-wxNum div {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding-left: 10px;\n  width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  height: 16px;\n  line-height: 16px;\n  color: #333333;\n}\n@media screen and (max-width: 320px) {\n.v2an-wxNum div {\n      font-size: 12px;\n}\n}\n.v2an-wxOuter {\n  padding-top: 36px;\n  width: 94%;\n  margin-left: 3%;\n}\n.v2an-wxOuter div {\n  height: 18px;\n  line-height: 18px;\n  font-size: 14px;\n  color: #333333;\n  margin-bottom: 6px;\n}\n.v2an-wxOuter span {\n  display: block;\n  font-size: 12px;\n  line-height: 26px;\n  height: auto;\n  color: #999999;\n}\n.v2an-billdetail-record-wrapper {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: #eeeeee;\n  overflow: scroll;\n}\n.v2an-left {\n  height: 100%;\n  float: left;\n}\n.v2an-overHide {\n  overflow: hidden;\n  height: 85px;\n  width: 96%;\n  margin-left: 2%;\n  margin-top: 10px;\n  border-radius: 6px;\n  background: #ffffff;\n}\n.showAllNum {\n  background: #ffffff;\n  color: #666666;\n}\n.addWXNum {\n  color: #ffffff;\n}\n.showAllNum, .addWXNum {\n  width: 96%;\n  margin-left: 2%;\n  text-align: center;\n  font-size: 14px;\n  height: 41px;\n  line-height: 41px;\n  border-radius: 6px;\n  margin-top: 10px;\n}\n",""])},WFNx:function(n,t,e){var a=e("PMHU");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var s=e("rjj0").default;s("7b5acd70",a,!0,{})}});