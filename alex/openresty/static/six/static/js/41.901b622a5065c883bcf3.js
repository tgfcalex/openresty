webpackJsonp([41],{DBvc:function(t,n,e){var o=e("WGth");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("rjj0").default;i("18bb3e04",o,!0,{})},LqbY:function(t,n,e){"use strict";function o(t){e("DBvc"),e("pTWy")}Object.defineProperty(n,"__esModule",{value:!0});var i=e("mvHQ"),r=e.n(i),a=e("GQaK"),s=e("kNDc"),l=e("LgOF"),c=e("2sLL"),p=e("ABCa"),d=function(){return e.e(127).then(e.bind(null,"ZzzE"))},b=e("0iPh"),f=(p.a,s.a,l.a,c.a,function(){return e.e(127).then(e.bind(null,"ZzzE"))}),h=e("0iPh"),m={components:{XHeader:p.a,Grid:s.a,GridItem:l.a,MyDialog:f,XButton:c.a},created:function(){var t=this;this.getHandicap(),this.getUserInfo(),this.intervalOne&&clearInterval(this.intervalOne),this.intervalOne=setInterval(function(){t.loadLeftTime()},1e3)},mounted:function(){this.bindScroll(),window.addEventListener("resize",function(){"INPUT"===document.activeElement.tagName&&window.setTimeout(function(){document.activeElement.scrollIntoView({behavior:"auto",block:"start",inline:"center"})},100)})},data:function(){return{balanceDialogShow:!1,betDialogShow:!1,successTime:null,isRunning:null,intervalOne:null,betForm:JSON.parse(localStorage.betForm),expect:JSON.parse(localStorage.betForm).expect,totalMoney:0,user:{balance:0},btnText:"确认",rechargeText:"立即存款",loading:!1,disable:!1,paramError:!1,lottorName:this.$route.query.name,scrollObj:"",isShowShade:!0,btnVerify:"请稍后..."}},methods:{scrollToElen:function(t){this.scrollObj.scrollToElement(t.target,300,!0,-24)},bindScroll:function(){this.scrollObj=new a.a(this.$refs.wrapper,{click:!0})},getTotalMoney:function(){var t=this,n=0;return h.each(this.betForm.betOrders,function(e){n=t.$global.add(n,Number(t.betForm.betOrders[e].betAmount))}),this.betForm.totalMoney=n,n},getOfiiCialAmount:function(t){var n=this.betForm.betOrders[t];if(/^\+?[1-9]\d*$/.test(n.multiple)){var e=this.$global.div(2*n.betCount*n.multiple,n.bonusModel);return this.betForm.betOrders[t].betAmount=e,this.paramError=!1,e}return this.toast("请输入大于0的正整数"),this.betForm.betOrders[t].betAmount=0,this.paramError=!0,0},betDialog:function(){if(!this.isShowShade){this.isShowShade=!0;var t=this.getTotalMoney(),n=this.user.balance;this.paramError?this.toast("下注参数有误"):t>0?t>n?this.balanceDialogShow=!this.balanceDialogShow:this.betDialogShow=!this.betDialogShow:this.toast("投注号码不能为空")}},toRecharge:function(){1*JSON.parse(localStorage.userinfo).mode==4?this.toast("试玩玩家无此权限"):1*JSON.parse(localStorage.userinfo).mode==5?this.toast("带玩玩家无此权限"):this.$router.push({path:"/mine/deposit"})},onResultChange3:function(t){this.betDialogShow=t},onResultChange4:function(t){this.balanceDialogShow=t},removeBetItem:function(t){isNaN(t)?(this.betForm.quantity=0,this.betForm.totalMoney=0,this.betForm.betOrders=[]):("tradition"===this.betForm.playModel?this.betForm.quantity=this.betForm.quantity-1:this.betForm.quantity=this.betForm.quantity-this.betForm.betOrders[t].betCount,this.betForm.totalMoney=this.betForm.totalMoney-this.betForm.betOrders[t].betAmount,this.betForm.betOrders.splice(t,1)),localStorage.setItem("betForm",r()(this.betForm))},loadLeftTime:function(){var t=this,n=h("#cdClose"),e=n.attr("data-time");if(isNaN(e)||e<0){if(null!=this.successTime&&(new Date).getTime()-this.successTime<5e3)return 1;-1===e&&(this.curExpect=h("span#drawNumber").text()),this.getHandicap(function(){t.successTime=(new Date).getTime()})}isNaN(e)||this.showLeftTime(e)},showLeftTime:function(t){var n=t,e=Math.floor(n/60/60);n-=60*e*60;var o=Math.floor(n/60);n-=60*o;var i=n,r=Math.floor(e/10)+""+Math.floor(e%10)+":"+Math.floor(o/10)+Math.floor(o%10)+":"+Math.floor(i/10)+Math.floor(i%10);h("#cdClose").attr("data-time",--t).html("截止"+r)},getHandicap:function(t){var n=this;this.isRunning||(this.isRunning=!0,this.$api.get(this.$luyou.LOTTO.GET_EXPECT,{code:this.betForm.code},function(e){e.data&&(h("#cdClose").attr("data-time",e.data.leftTime),n.betForm.expect=e.data.expect,"function"==typeof t&&t(),n.isRunning=!1)},function(t){t&&n.toast(n.$api.tip(t))}))},saveBetOrder:function(){var t=this;this.handleBtn(!0);var n="",e=this.$qs.stringify({"lb.token":localStorage.fctoken,betForm:r()(this.betForm)});this.$api.post(this.$luyou.LOTTO.SAVE_BET_ORDER,e,function(e){localStorage.fctoken=e.extend,0===e.error?(n=e.data.billNo,t.toast("下注成功"),t.$router.replace({path:"/lotto/Result",query:{billNo:n,code:t.betForm.code}})):(t.toast(e.message),t.handleBtn(!1))},function(n){t.toast(t.$api.tip(n)),t.handleBtn(!1)})},getUserInfo:function(){var t=this;this.$store.state.token&&this.$api.get(this.$luyou.ACCOUNT.GET_USER_INFO,null,function(n){0===n.error?(t.isShowShade=!1,t.btnVerify="确认投注",t.user=n.data):t.toast(n.message)},function(n){n&&t.toast(t.$api.tip(n))})},getRandomBetNum:function(){window.top.getRandomBetNum();var t=JSON.parse(localStorage.randomOrder);this.betForm.betOrders.push(t),"tradition"===this.betForm.playModel?this.betForm.quantity=this.betForm.quantity+1:this.betForm.quantity=this.betForm.quantity+t.betCount,this.betForm.totalMoney=this.$global.add(this.betForm.totalMoney,Number(t.betAmount))},evil:function(t){return new Function("return "+t)()},handleBtn:function(t){this.loading=t,this.disable=t,this.btnText=t?"请稍后…":"确认"}},beforeRouteLeave:function(t,n,e){clearInterval(this.intervalOne),e()},beforeDestroy:function(){},computed:{conHeight:function(){return this.$init.height-239+"px"}}},u=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"confirm-wrapper confirm-wrapper-2"},[e("x-header",{staticClass:"header",attrs:{"left-options":{backText:" "}}},[t._v("\n      "+t._s(t.lottorName)+"\n\t\t")]),t._v(" "),e("p",{staticClass:"time"},[t._v("距"+t._s(t.betForm.expect)+"期截止："),e("font",{attrs:{id:"cdClose"}},[t._v("00:00:00")])],1),t._v(" "),e("p",{staticClass:"tit flexBetween"},[e("button",{staticClass:"close",on:{click:t.removeBetItem}},[t._v("清空列表")]),t._v(" "),"official"===t.betForm.playModel?e("button",{staticClass:"random",on:{click:function(n){t.getRandomBetNum()}}},[t._v("随机一注")]):t._e(),t._v(" "),e("font",{staticClass:"iconfont icon-wallet"},[t._v(" "),e("span",[t._v(t._s(t.user.balance))])])],1),t._v(" "),e("div",{ref:"wrapper",staticClass:"wrapper",style:{height:t.conHeight}},[e("div",{staticClass:"content"},["tradition"===t.betForm.playModel?e("ul",{staticClass:"list-box",attrs:{id:"betList"}},t._l(t.betForm.betOrders,function(n,o){return e("li",[e("p",{staticClass:"left",on:{click:function(n){t.removeBetItem(o)}}}),t._v(" "),e("div",{staticClass:"center tradition"},[e("span",[t._v(t._s(t.DictTool.LOTTERY.PLAY_CODE[n.playCode])+"-"+t._s(t.DictTool.LOTTERY.BET_CODE[n.betCode]))]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(n.betNum))])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"outer"},[e("p",{staticClass:"noMarginBottom"},[e("span",{staticClass:"moneyNum"},[t._v("金额")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.betForm.betOrders[o].betAmount,expression:"betForm.betOrders[index].betAmount"}],attrs:{type:"number",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",maxlength:"8"},domProps:{value:t.betForm.betOrders[o].betAmount},on:{focus:function(n){t.scrollToElen(n)},input:function(n){n.target.composing||t.$set(t.betForm.betOrders[o],"betAmount",n.target.value)}}})]),t._v(" "),e("p",{staticClass:"noMarginBottom setShow"},[t._v("共1注，共"+t._s(n.betAmount)+"元")])])])])}),0):t._e(),t._v(" "),"official"===t.betForm.playModel?e("ul",{staticClass:"list-box",attrs:{id:"betList"}},t._l(t.betForm.betOrders,function(n,o){return e("li",[e("p",{staticClass:"left",on:{click:function(n){t.removeBetItem(o)}}}),t._v(" "),e("div",{staticClass:"center"},[e("p",{staticClass:"num"},[t._v(t._s(n.betNum))]),t._v(" "),e("font",[t._v(t._s(t.DictTool.LOTTERY.BET_CODE[n.betCode])+" "+t._s(n.betCount)+"注")]),t._v(" "),e("font",[t._v(t._s(n.multiple)+"倍  "+t._s(t.getOfiiCialAmount(o))+"元")])],1),t._v(" "),e("div",{staticClass:"right"},[e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.betForm.betOrders[o].multiple,expression:"betForm.betOrders[index].multiple"}],attrs:{type:"number",maxlength:"8"},domProps:{value:t.betForm.betOrders[o].multiple},on:{input:function(n){n.target.composing||t.$set(t.betForm.betOrders[o],"multiple",n.target.value)}}}),t._v("倍")])])])}),0):t._e()])]),t._v(" "),e("div",{staticClass:"footer"},[e("p",{staticClass:"p p-1"},[t._v("共 "),e("b",[t._v(t._s(t.betForm.quantity))]),t._v(" 注，投注 "),e("b",[t._v(t._s(t.getTotalMoney()))]),t._v(" 元")]),t._v(" "),e("div",{staticClass:"link",on:{click:t.betDialog}},[t._v(t._s(t.btnVerify))])]),t._v(" "),e("my-dialog",{attrs:{isShow:t.betDialogShow},on:{"on-result-change":t.onResultChange3,dialogHandler:t.betDialog}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("投注确认")]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"betConfirm"},["official"===t.betForm.playModel?e("div",[t._v(t._s(t.lottorName)+"-官方玩法")]):e("div",[t._v(t._s(t.lottorName)+"-传统玩法")]),t._v(" "),e("div",[t._v("第"),e("b",[t._v(" "+t._s(t.betForm.expect)+" ")]),t._v("期")]),t._v(" "),e("div",[t._v("共"),e("b",[t._v(" "+t._s(t.betForm.quantity)+" ")]),t._v("注")]),t._v(" "),e("div",[t._v("投注"),e("b",[t._v(" "+t._s(t.getTotalMoney())+" ")]),t._v("元")]),t._v(" "),e("x-button",{staticClass:"btn btn-ok",attrs:{"show-loading":t.loading,disabled:t.disable},nativeOn:{click:function(n){return t.saveBetOrder(n)}}},[t._v(t._s(t.btnText))])],1)])]),t._v(" "),e("my-dialog",{attrs:{isShow:t.balanceDialogShow},on:{"on-result-change":t.onResultChange4,dialogHandler:t.betDialog}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("余额不足")]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"betConfirm"},["official"===t.betForm.playModel?e("div",[t._v(t._s(t.lottorName)+"-官方玩法")]):t._e(),t._v(" "),e("div",[t._v("投注金额"),e("b",[t._v(" "+t._s(t.getTotalMoney())+" ")]),t._v("元")]),t._v(" "),e("div",[t._v("您的余额"),e("b",[t._v(" "+t._s(t.user.balance)+" ")]),t._v("元")]),t._v(" "),e("x-button",{staticClass:"btn btn-ok",attrs:{"show-loading":t.loading,disabled:t.disable},nativeOn:{click:function(n){return t.toRecharge(n)}}},[t._v(t._s(t.rechargeText))])],1)])])],1)},g=[],x=e("XyMi"),v=o,w=Object(x.a)(m,u,g,!1,v,"data-v-ee606a16",null);n.default=w.exports},WGth:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,"\n.confirm-wrapper {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 999;\n  background: #fff;\n}\n.confirm-wrapper * {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.confirm-wrapper ul, .confirm-wrapper li {\n    list-style: none;\n}\n.confirm-wrapper .header {\n    position: relative;\n    z-index: 9;\n}\n.confirm-wrapper .time {\n    text-align: center;\n    font-size: 1.7rem;\n    color: #adadad;\n    line-height: 45px;\n    height: 45px;\n}\n.confirm-wrapper .time font {\n      color: #fa6200;\n}\n.confirm-wrapper .tit {\n    height: 45px;\n    background: #f2f2f2;\n    padding: 0 10px;\n}\n.confirm-wrapper .tit .close {\n      width: 95px;\n      height: 30px;\n      line-height: 30px;\n      border-radius: 5px;\n      border: 1px solid #969696;\n      background: #fff;\n      float: left;\n      margin-top: 8px;\n      color: #adadad;\n}\n.confirm-wrapper .tit .icon-wallet {\n      background-size: 23px;\n      display: inline-block;\n      float: right;\n      line-height: 45px;\n      font-size: 2.4rem;\n      color: #fa6200;\n}\n.confirm-wrapper .tit .icon-wallet span {\n        font-size: 1.4rem;\n        color: #969696;\n        vertical-align: bottom;\n}\n.confirm-wrapper .list-box li {\n    border-bottom: 5px solid #f2f2f2;\n    overflow: hidden;\n    position: relative;\n}\n.confirm-wrapper .list-box li .left {\n      width: 13%;\n      position: absolute;\n      left: 0;\n      height: 100%;\n}\n.confirm-wrapper .list-box li .left:before {\n        content: '\\2716';\n        color: #969696;\n        font-size: 1.6rem;\n        width: 25px;\n        height: 25px;\n        border-radius: 100%;\n        border: 1px solid #efefef;\n        display: inline-block;\n        text-align: center;\n        line-height: 25px;\n        position: absolute;\n        left: 11px;\n        top: 50%;\n        margin-top: -13px;\n}\n.confirm-wrapper .list-box li .center {\n      width: 34%;\n      height: 100%;\n      position: absolute;\n      left: 13%;\n      padding: 7px 0;\n      text-align: left;\n      font-size: 1.7rem;\n      line-height: 22px;\n}\n.confirm-wrapper .list-box li .center span {\n        color: #adadad;\n}\n.confirm-wrapper .list-box li .center p {\n        color: #fa6200;\n        font-weight: bold;\n        word-break: break-all;\n        word-wrap: break-word;\n}\n.confirm-wrapper .list-box li .right {\n      width: 50%;\n      height: 100%;\n      position: absolute;\n      right: 0;\n      text-align: right;\n      font-size: 1.4rem;\n      color: #adadad;\n      padding: 12px 15px 0 0;\n      line-height: 30px;\n}\n.confirm-wrapper .list-box li .right input {\n        display: inline-block;\n        height: 25px;\n        width: 70px;\n        border: 1px solid #969696;\n        background: #f2f2f2;\n        border-radius: 3px;\n        margin: 0 3px;\n        text-align: center;\n}\n.confirm-wrapper .list-box li .right .num {\n        fong-size: 12px;\n        color: #969696;\n}\n.confirm-wrapper .footer {\n    position: fixed;\n    width: 100%;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    background: #fff;\n    -webkit-box-shadow: 1px -3px 5px #d3d3d3;\n            box-shadow: 1px -3px 5px #d3d3d3;\n    text-align: center;\n}\n.confirm-wrapper .footer .p {\n      height: 35px;\n      line-height: 35px;\n      color: #adadad;\n      font-size: 1.4rem;\n      text-align: center;\n}\n.confirm-wrapper .footer .p a {\n        display: block;\n        color: inherit;\n}\n.confirm-wrapper .footer .p-1 {\n      background: #f2f2f2;\n}\n.confirm-wrapper .footer .link {\n      display: inline-block;\n      text-align: center;\n      line-height: 36px;\n      -webkit-box-shadow: 0 6px 3px #f2f2f2;\n              box-shadow: 0 6px 3px #f2f2f2;\n      width: 150px;\n      border-radius: 20px;\n      height: 40px;\n      border: none;\n      color: #fa6200;\n      font-size: 1.7rem;\n      margin: 10px 0;\n      background: -webkit-gradient(linear, left top, right top, from(#fc901c), to(#f64c01));\n      background: linear-gradient(to right, #fc901c, #f64c01);\n      color: #fff;\n      -webkit-box-shadow: 0 6px 3px rgba(250, 98, 0, 0.3);\n              box-shadow: 0 6px 3px rgba(250, 98, 0, 0.3);\n}\n.confirm-wrapper .footer b {\n      color: #fa6200;\n}\n.confirm-wrapper-2 .tit .random {\n  width: 95px;\n  height: 30px;\n  line-height: 32px;\n  border-radius: 5px;\n  background: -webkit-gradient(linear, left top, right top, from(#fc901c), to(#f64c01));\n  background: linear-gradient(to right, #fc901c, #f64c01);\n  border: none;\n  margin: 8px 0 0 8px;\n  color: #fff;\n}\n.confirm-wrapper-2 .list-box li {\n  min-height: 90px;\n}\n.confirm-wrapper-2 .list-box li .center {\n    width: 50%;\n    padding: 10px 0;\n    position: static;\n    margin-left: 13%;\n    float: left;\n}\n.confirm-wrapper-2 .list-box li .center .num {\n      line-height: 25px;\n}\n.confirm-wrapper-2 .list-box li .center font {\n      font-size: 1.4rem;\n      color: #969696;\n      line-height: 24px;\n      display: block;\n}\n.confirm-wrapper-2 .list-box li .center.tradition {\n      padding: 20px 0;\n}\n.confirm-wrapper-2 .list-box li .right {\n    width: 35%;\n    padding-top: 0px;\n}\n.confirm-wrapper-2 .list-box li .right .outer {\n      position: relative;\n      -webkit-transform: translateY(-50%);\n      transform: translateY(-50%);\n      top: 50%;\n}\n.confirm-wrapper-2 .list-box li .right p {\n      margin-bottom: 5px;\n}\n.confirm-wrapper-2 .list-box li .right p:only-child {\n        position: relative;\n        top: 50%;\n        -webkit-transform: translateY(-50%);\n                transform: translateY(-50%);\n}\n.confirm-wrapper-2 .list-box li .right p.noMarginBottom {\n      margin-bottom: 0px;\n}\n.confirm-wrapper-2 .list-box li .right p.setShow {\n      text-align: center;\n      line-height: 2.4rem;\n      word-break: break-word;\n}\n.confirm-wrapper-2 .list-box li .right .reset-show {\n      line-height: 2.4rem;\n      text-align: center;\n}\n.confirm-wrapper-2 .list-box li .right .follow {\n      width: 70px;\n      height: 25px;\n      line-height: 25px;\n      color: #fff;\n      text-align: center;\n      border-radius: 3px;\n      background: -webkit-gradient(linear, left top, right top, from(#fc901c), to(#f64c01));\n      background: linear-gradient(to right, #fc901c, #f64c01);\n      border: none;\n      margin-right: 17px;\n}\n.betConfirm {\n  text-align: center;\n  font-size: 15px;\n  line-height: 1.5;\n}\n.betConfirm b {\n    color: #fa6200;\n}\n.flexBetween {\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-justify-content: space-between;\n}\n.betConfirm button {\n  height: 35px;\n  text-align: center;\n  line-height: 33px;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  border-radius: 17.5px;\n  border: 1px solid #e2e2e2;\n  background: #fff;\n  color: #fa6200;\n  -webkit-box-shadow: 0 3px 3px #d3d3d3;\n  box-shadow: 0 3px 3px #d3d3d3;\n  font-size: 17px;\n  font-family: inherit;\n  margin-top: 23px;\n}\n.betConfirm button.btn-ok {\n    width: 130px;\n    background: -webkit-gradient(linear, left top, right top, from(#fc901c), to(#f64c01));\n    background: linear-gradient(to right, #fc901c, #f64c01);\n    border-color: #fa6200;\n    color: #fff;\n    -webkit-box-shadow: 0 3px 3px rgba(250, 98, 0, 0.2);\n    box-shadow: 0 3px 3px rgba(250, 98, 0, 0.2);\n    font-size: 1.5rem;\n}\n@media screen and (max-width: 320px) {\n.confirm-wrapper .list-box li .right input {\n    width: 58px;\n}\n.confirm-wrapper-2 .list-box li .right p.noMarginBottom, .confirm-wrapper .tit {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.confirm-wrapper-2 .list-box li .right p.noMarginBottom .moneyNum {\n    height: 25px;\n    line-height: 25px;\n}\n}\n",""])},pTWy:function(t,n,e){var o=e("qYy8");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("rjj0").default;i("9703ed5e",o,!0,{})},qYy8:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,"\n.confirm-wrapper-2 .wrapper[data-v-ee606a16] {\n  overflow: hidden;\n}\n",""])}});