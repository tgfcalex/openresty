(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0e146c"],{"7a6b":function(t,e,o){"use strict";o.r(e);var n=o("11c1"),i=o.n(n),s={data:function(){return{url:location.href,flag:!0}},created:function(){this.apiLogin()},beforeDestroy:function(){document.getElementById("loadBox")&&document.body.removeChild(document.getElementById("loadBox"))},methods:{apiLogin:function(){var t=this;if(-1===this.url.indexOf("#/?"))return this.getUserInfo(),void(location.href=this.getUrl("/home"));this.$store.dispatch("loginOut"),this.$store.dispatch("setUserInfo",null),this.$store.dispatch("resetLotteryOdd");var e=this.url.substring(this.url.indexOf("#/?")+3,this.url.length);if(e=encodeURIComponent(e)){var o=sessionStorage.template;sessionStorage.clear(),sessionStorage.template=o;var n=i.a.v4(),s={param:e,no:n};this.$api.post(this.$apiUrl.PASSPORT.LOGIN,s,(function(e){0===e.error?(sessionStorage.token=e.data.token,sessionStorage.fctoken=e.extend.token,sessionStorage.uuid=n,sessionStorage.hallUrl=e.data.hallUrl,t.getUserInfo(s)):(t.toast("账号异常"),location.href=t.getUrl("/home"))}),(function(e){t.toast("账号异常"),location.href=t.getUrl("/home")}))}else sessionStorage.token?this.isLogin(e):setTimeout((function(){location.href=t.getUrl("/home")}),2200)},isLogin:function(t){var e=this;t?this.$api.get(this.$apiUrl.LOTTO.GOTO_BET,{param:t},(function(t){0===t.error?setTimeout((function(){var o="/"+t.data.type+"/"+t.data.model+"/"+t.data.code;location.href=e.getUrl(o)}),2e3):location.href=e.getUrl("/home")}),(function(t){e.toast("玩法code错误"),location.href=e.getUrl("/home")})):location.href=this.getUrl("/home")},getUserInfo:function(t){var e=this;sessionStorage.token&&this.$api.get(this.$apiUrl.ACCOUNT.GET_USER_INFO,null,(function(o){var n=o.data;e.$api.get(e.$apiUrl.ACCOUNT.GET_USER_ACTIVITY,null,(function(o){0===o.error&&(n.csBalance=o.data.csBalance,n.csBanned=o.data.csBanned,n.csMatch=o.data.csMatch,n.csSignUp=o.data.csSignUp,e.$store.dispatch("setUserInfoFlag",!0),e.getProjectID(e.isLogin(t))),e.$store.dispatch("setUserInfo",n)}))}))},getUrl:function(t){return location.origin+location.pathname+"#"+t},getProjectID:function(t){var e=this,o=0<arguments.length&&void 0!==t?t:function(){};this.$api.get(this.$apiUrl.LOTTO.GET_PROJECT_BY_USER,null,(function(t){sessionStorage.projectId=t.data.projectId,o()}),(function(t){e.toast(t.message)}))},saveErrorLog:function(t,e){var o=this,n={content:JSON.stringify(t),browserVersion:"账号-异常信息错误反馈: "+JSON.stringify(e)};this.$api.post(this.$apiUrl.PASSPORT.SAVELOGS,n,(function(t){o.routerHome(".")}),(function(t){o.routerHome("。")}))},routerHome:function(t){this.toast("账号异常"+t),location.href=this.getUrl("/home")}}},r=o("2877"),a=Object(r.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null);e.default=a.exports}}]);